import{r as Ce,s as ve,u as $e,v as ke,w as Te,x as Me,i as xe,o as Fe,y as Ie}from"../chunks/scheduler.DF6JUidF.js";import{n as B,S as Se,i as Ee,e as C,s as L,c as x,a as D,d as k,f as R,o as E,g as F,h as S,l as J,t as Y,b as Z,z as Oe,j as re,u as ie,k as ce,y as ne,v as le,w as ae,x as ue}from"../chunks/index.Ck5vuUOj.js";import{w as te}from"../chunks/index.DDK7gcf9.js";function fe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Le(t,e){t.d(1),e.delete(t.key)}function Re(t,e,n,o,s,r,c,a,w,b,m,T){let i=t.length,l=r.length,u=i;const f={};for(;u--;)f[t[u].key]=u;const M=[],W=new Map,$=new Map,y=[];for(u=l;u--;){const h=T(s,r,u),j=n(h);let A=c.get(j);A?o&&y.push(()=>A.p(h,e)):(A=b(j,h),A.c()),W.set(j,M[u]=A),j in f&&$.set(j,Math.abs(u-f[j]))}const _=new Set,p=new Set;function U(h){B(h,1),h.m(a,m),c.set(h.key,h),m=h.first,l--}for(;i&&l;){const h=M[l-1],j=t[i-1],A=h.key,H=j.key;h===j?(m=h.first,i--,l--):W.has(H)?!c.has(A)||_.has(A)?U(h):p.has(H)?i--:$.get(A)>$.get(H)?(p.add(A),U(h)):(_.add(H),i--):(w(j,c),i--)}for(;i--;){const h=t[i];W.has(h.key)||w(h,c)}for(;l;)U(M[l-1]);return Ce(y),M}const We=!0,De="always",nt=Object.freeze(Object.defineProperty({__proto__:null,prerender:We,trailingSlash:De},Symbol.toStringTag,{value:"Module"}));function _e(t,e,n){const o=t.slice();return o[3]=e[n],o}function de(t,e){let n,o,s=e[3].label+"",r,c,a,w=e[3].shortcut+"",b,m,T,i;return{key:t,first:null,c(){n=C("button"),o=C("p"),r=Y(s),c=L(),a=C("p"),b=Y(w),m=L(),this.h()},l(l){n=x(l,"BUTTON",{class:!0});var u=D(n);o=x(u,"P",{});var f=D(o);r=Z(f,s),f.forEach(k),c=R(u),a=x(u,"P",{class:!0});var M=D(a);b=Z(M,w),M.forEach(k),m=R(u),u.forEach(k),this.h()},h(){E(a,"class","shortcut svelte-11tqrzj"),E(n,"class","svelte-11tqrzj"),this.first=n},m(l,u){F(l,n,u),S(n,o),S(o,r),S(n,c),S(n,a),S(a,b),S(n,m),T||(i=Oe(n,"click",function(){xe(e[3].action)&&e[3].action.apply(this,arguments)}),T=!0)},p(l,u){e=l,u&1&&s!==(s=e[3].label+"")&&re(r,s),u&1&&w!==(w=e[3].shortcut+"")&&re(b,w)},d(l){l&&k(n),T=!1,i()}}}function Ue(t){let e,n,o,s,r=[],c=new Map,a;const w=t[2].default,b=$e(w,t,t[1],null);let m=fe(t[0]);const T=i=>i[3].label;for(let i=0;i<m.length;i+=1){let l=_e(t,m,i),u=T(l);c.set(u,r[i]=de(u,l))}return{c(){e=C("div"),n=C("button"),b&&b.c(),o=L(),s=C("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=x(i,"DIV",{class:!0});var l=D(e);n=x(l,"BUTTON",{class:!0});var u=D(n);b&&b.l(u),u.forEach(k),o=R(l),s=x(l,"DIV",{class:!0});var f=D(s);for(let M=0;M<r.length;M+=1)r[M].l(f);f.forEach(k),l.forEach(k),this.h()},h(){E(n,"class","svelte-11tqrzj"),E(s,"class","dropdown svelte-11tqrzj"),E(e,"class","mb-dropdown svelte-11tqrzj")},m(i,l){F(i,e,l),S(e,n),b&&b.m(n,null),S(e,o),S(e,s);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,null);a=!0},p(i,[l]){b&&b.p&&(!a||l&2)&&ke(b,w,i,i[1],a?Me(w,i[1],l,null):Te(i[1]),null),l&1&&(m=fe(i[0]),r=Re(r,l,T,1,i,m,c,s,Le,de,null,_e))},i(i){a||(B(b,i),a=!0)},o(i){J(b,i),a=!1},d(i){i&&k(e),b&&b.d(i);for(let l=0;l<r.length;l+=1)r[l].d()}}}function qe(t,e,n){let{$$slots:o={},$$scope:s}=e,{options:r=[]}=e;return t.$$set=c=>{"options"in c&&n(0,r=c.options),"$$scope"in c&&n(1,s=c.$$scope)},[r,s,o]}class be extends Se{constructor(e){super(),Ee(this,e,qe,Ue,ve,{options:0})}}let v;const O=new Array(128).fill(void 0);O.push(void 0,null,!0,!1);function d(t){return O[t]}let K=O.length;function ze(t){t<132||(O[t]=K,K=t)}function oe(t){const e=d(t);return ze(t),e}const je=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&je.decode();let N=null;function G(){return(N===null||N.byteLength===0)&&(N=new Uint8Array(v.memory.buffer)),N}function P(t,e){return t=t>>>0,je.decode(G().subarray(t,t+e))}function g(t){K===O.length&&O.push(O.length+1);const e=K;return K=O[e],O[e]=t,e}let ee=0;const Q=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Pe=typeof Q.encodeInto=="function"?function(t,e){return Q.encodeInto(t,e)}:function(t,e){const n=Q.encode(t);return e.set(n),{read:t.length,written:n.length}};function ge(t,e,n){if(n===void 0){const a=Q.encode(t),w=e(a.length,1)>>>0;return G().subarray(w,w+a.length).set(a),ee=a.length,w}let o=t.length,s=e(o,1)>>>0;const r=G();let c=0;for(;c<o;c++){const a=t.charCodeAt(c);if(a>127)break;r[s+c]=a}if(c!==o){c!==0&&(t=t.slice(c)),s=n(s,o,o=c+t.length*3,1)>>>0;const a=G().subarray(s+c,s+o),w=Pe(t,a);c+=w.written,s=n(s,o,c,1)>>>0}return ee=c,s}function q(t){return t==null}let V=null;function z(){return(V===null||V.byteLength===0)&&(V=new Int32Array(v.memory.buffer)),V}function se(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const s=t.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=t.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(t)){const s=t.length;let r="[";s>0&&(r+=se(t[0]));for(let c=1;c<s;c++)r+=", "+se(t[c]);return r+="]",r}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let o;if(n.length>1)o=n[1];else return toString.call(t);if(o=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:o}const we=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>{v.__wbindgen_export_2.get(t.dtor)(t.a,t.b)});function pe(t,e,n,o){const s={a:t,b:e,cnt:1,dtor:n},r=(...c)=>{s.cnt++;const a=s.a;s.a=0;try{return o(a,s.b,...c)}finally{--s.cnt===0?(v.__wbindgen_export_2.get(s.dtor)(a,s.b),we.unregister(s)):s.a=a}};return r.original=s,we.register(r,s,s),r}function Ne(t,e,n){v._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__hccf5f6a87944ac75(t,e,g(n))}function Ve(t,e,n){v._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h905d0f866daef3da(t,e,g(n))}let X=128;function Be(t){if(X==1)throw new Error("out of js stack");return O[--X]=t,X}function he(t){try{const o=v.__wbindgen_add_to_stack_pointer(-16);v.open_file(o,Be(t));var e=z()[o/4+0],n=z()[o/4+1];if(n)throw oe(e)}finally{v.__wbindgen_add_to_stack_pointer(16),O[X++]=void 0}}function I(t,e){try{return t.apply(this,e)}catch(n){v.__wbindgen_exn_store(g(n))}}async function Ke(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(o){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function He(){const t={};return t.wbg={},t.wbg.__wbindgen_object_drop_ref=function(e){oe(e)},t.wbg.__wbindgen_cb_drop=function(e){const n=oe(e).original;return n.cnt--==1?(n.a=0,!0):!1},t.wbg.__wbindgen_string_new=function(e,n){const o=P(e,n);return g(o)},t.wbg.__wbindgen_object_clone_ref=function(e){const n=d(e);return g(n)},t.wbg.__wbindgen_string_get=function(e,n){const o=d(n),s=typeof o=="string"?o:void 0;var r=q(s)?0:ge(s,v.__wbindgen_malloc,v.__wbindgen_realloc),c=ee;z()[e/4+1]=c,z()[e/4+0]=r},t.wbg.__wbg_queueMicrotask_481971b0d87f3dd4=function(e){queueMicrotask(d(e))},t.wbg.__wbg_queueMicrotask_3cbae2ec6b6cd3d6=function(e){const n=d(e).queueMicrotask;return g(n)},t.wbg.__wbindgen_is_function=function(e){return typeof d(e)=="function"},t.wbg.__wbg_instanceof_Window_f401953a2cf86220=function(e){let n;try{n=d(e)instanceof Window}catch{n=!1}return n},t.wbg.__wbg_document_5100775d18896c16=function(e){const n=d(e).document;return q(n)?0:g(n)},t.wbg.__wbg_body_edb1908d3ceff3a1=function(e){const n=d(e).body;return q(n)?0:g(n)},t.wbg.__wbg_createElement_8bae7856a4bb7411=function(){return I(function(e,n,o){const s=d(e).createElement(P(n,o));return g(s)},arguments)},t.wbg.__wbg_setonchange_8f887c27a2d4469d=function(e,n){d(e).onchange=d(n)},t.wbg.__wbg_click_897b305b2e10b9cf=function(e){d(e).click()},t.wbg.__wbg_instanceof_HtmlInputElement_307512fe1252c849=function(e){let n;try{n=d(e)instanceof HTMLInputElement}catch{n=!1}return n},t.wbg.__wbg_files_8b6e6eff43af0f6d=function(e){const n=d(e).files;return q(n)?0:g(n)},t.wbg.__wbg_settype_12715bd23e119883=function(e,n,o){d(e).type=P(n,o)},t.wbg.__wbg_target_2fc177e386c8b7b0=function(e){const n=d(e).target;return q(n)?0:g(n)},t.wbg.__wbg_log_5bb5f88f245d7762=function(e){console.log(d(e))},t.wbg.__wbg_get_58f6d5f6aee3f846=function(e,n){const o=d(e)[n>>>0];return q(o)?0:g(o)},t.wbg.__wbg_appendChild_580ccb11a660db68=function(){return I(function(e,n){const o=d(e).appendChild(d(n));return g(o)},arguments)},t.wbg.__wbg_text_98ef8ded212d7512=function(e){const n=d(e).text();return g(n)},t.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(e,n){const o=new Function(P(e,n));return g(o)},t.wbg.__wbg_call_27c0f87801dedf93=function(){return I(function(e,n){const o=d(e).call(d(n));return g(o)},arguments)},t.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return I(function(){const e=self.self;return g(e)},arguments)},t.wbg.__wbg_window_c6fb939a7f436783=function(){return I(function(){const e=window.window;return g(e)},arguments)},t.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return I(function(){const e=globalThis.globalThis;return g(e)},arguments)},t.wbg.__wbg_global_207b558942527489=function(){return I(function(){const e=global.global;return g(e)},arguments)},t.wbg.__wbindgen_is_undefined=function(e){return d(e)===void 0},t.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return I(function(e,n,o){const s=d(e).call(d(n),d(o));return g(s)},arguments)},t.wbg.__wbg_resolve_b0083a7967828ec8=function(e){const n=Promise.resolve(d(e));return g(n)},t.wbg.__wbg_then_0c86a60e8fcfe9f6=function(e,n){const o=d(e).then(d(n));return g(o)},t.wbg.__wbg_then_a73caa9a87991566=function(e,n,o){const s=d(e).then(d(n),d(o));return g(s)},t.wbg.__wbindgen_debug_string=function(e,n){const o=se(d(n)),s=ge(o,v.__wbindgen_malloc,v.__wbindgen_realloc),r=ee;z()[e/4+1]=r,z()[e/4+0]=s},t.wbg.__wbindgen_throw=function(e,n){throw new Error(P(e,n))},t.wbg.__wbindgen_closure_wrapper71=function(e,n,o){const s=pe(e,n,16,Ne);return g(s)},t.wbg.__wbindgen_closure_wrapper99=function(e,n,o){const s=pe(e,n,36,Ve);return g(s)},t}function Je(t,e){return v=t.exports,Ae.__wbindgen_wasm_module=e,V=null,N=null,v}async function Ae(t){if(v!==void 0)return v;typeof t>"u"&&(t=new URL(""+new URL("../assets/ppm_compiler_bg.DLo1uTPB.wasm",import.meta.url).href,import.meta.url));const e=He();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:o}=await Ke(await t,e);return Je(n,o)}function Ge(t){let e;return{c(){e=Y("File")},l(n){e=Z(n,"File")},m(n,o){F(n,e,o)},d(n){n&&k(e)}}}function Qe(t){let e;return{c(){e=Y("View")},l(n){e=Z(n,"View")},m(n,o){F(n,e,o)},d(n){n&&k(e)}}}function me(t){let e,n='<div class="svelte-1bfxtfp"><div style="text-align: center; padding: 0px 40px;"><h2 class="svelte-1bfxtfp">🌸 ;saeko</h2> <p class="svelte-1bfxtfp">A tiny supercharged PPM viewer. Created by <a target="_blank" href="https://github.com/Uzair-Fasih" class="svelte-1bfxtfp">Uzair Fasih</a>.</p></div></div>';return{c(){e=C("div"),e.innerHTML=n,this.h()},l(o){e=x(o,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-165unbq"&&(e.innerHTML=n),this.h()},h(){E(e,"id","about-modal"),E(e,"class","svelte-1bfxtfp")},m(o,s){F(o,e,s)},d(o){o&&k(e)}}}function Xe(t){let e,n,o="saeko",s,r,c,a,w,b,m="About",T,i,l,u,f,M;r=new be({props:{options:t[1],$$slots:{default:[Ge]},$$scope:{ctx:t}}}),a=new be({props:{options:t[2],$$slots:{default:[Qe]},$$scope:{ctx:t}}});const W=t[4].default,$=$e(W,t,t[5],null);let y=t[0]&&me();return{c(){e=C("div"),n=C("p"),n.textContent=o,s=L(),ie(r.$$.fragment),c=L(),ie(a.$$.fragment),w=L(),b=C("button"),b.textContent=m,T=L(),$&&$.c(),i=L(),y&&y.c(),l=ce(),this.h()},l(_){e=x(_,"DIV",{id:!0,class:!0});var p=D(e);n=x(p,"P",{id:!0,class:!0,"data-svelte-h":!0}),ne(n)!=="svelte-3fw4g"&&(n.textContent=o),s=R(p),le(r.$$.fragment,p),c=R(p),le(a.$$.fragment,p),w=R(p),b=x(p,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(b)!=="svelte-rsh6h8"&&(b.textContent=m),p.forEach(k),T=R(_),$&&$.l(_),i=R(_),y&&y.l(_),l=ce(),this.h()},h(){E(n,"id","logo"),E(n,"class","svelte-1bfxtfp"),E(b,"class","svelte-1bfxtfp"),E(e,"id","menu-bar"),E(e,"class","svelte-1bfxtfp")},m(_,p){F(_,e,p),S(e,n),S(e,s),ae(r,e,null),S(e,c),ae(a,e,null),S(e,w),S(e,b),F(_,T,p),$&&$.m(_,p),F(_,i,p),y&&y.m(_,p),F(_,l,p),u=!0,f||(M=Oe(b,"click",t[3]),f=!0)},p(_,[p]){const U={};p&32&&(U.$$scope={dirty:p,ctx:_}),r.$set(U);const h={};p&32&&(h.$$scope={dirty:p,ctx:_}),a.$set(h),$&&$.p&&(!u||p&32)&&ke($,W,_,_[5],u?Me(W,_[5],p,null):Te(_[5]),null),_[0]?y||(y=me(),y.c(),y.m(l.parentNode,l)):y&&(y.d(1),y=null)},i(_){u||(B(r.$$.fragment,_),B(a.$$.fragment,_),B($,_),u=!0)},o(_){J(r.$$.fragment,_),J(a.$$.fragment,_),J($,_),u=!1},d(_){_&&(k(e),k(T),k(i),k(l)),ue(r),ue(a),$&&$.d(_),y&&y.d(_),f=!1,M()}}}function ye(){alert("Still WIP! For now, you can right click and save 🙏")}function Ye(t,e,n){let{$$slots:o={},$$scope:s}=e,r=te({}),c=te(!0),a=te(!0);Fe(()=>{Ae(),window.onkeydown=function(f){f.preventDefault(),f.stopPropagation(),f.ctrlKey&&f.key=="u"?he(w):f.ctrlKey&&f.key=="s"?ye():f.ctrlKey&&f.key=="k"?b():f.ctrlKey&&f.shiftKey&&f.key=="p"&&m()},window.onclick=()=>{n(0,l=!1)}});function w(f){r.set(JSON.parse(f))}function b(){c.update(f=>!f)}function m(){a.update(f=>!f)}const T=[{label:"Open",shortcut:"^U",action:()=>he(w)},{label:"Save",shortcut:"^S",action:ye}],i=[{label:"Toggle Details",shortcut:"^K",action:b},{label:"Toggle Viewer",shortcut:"^Shift P",action:m}];let l=!1;function u(f){f.preventDefault(),f.stopPropagation(),n(0,l=!0)}return t.$$set=f=>{"$$scope"in f&&n(5,s=f.$$scope)},Ie("store",{loaded_file:r,show_editor:c,show_viewer:a}),[l,T,i,u,o,s]}class ot extends Se{constructor(e){super(),Ee(this,e,Ye,Xe,ve,{})}}export{ot as component,nt as universal};
